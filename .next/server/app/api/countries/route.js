"use strict";(()=>{var e={};e.id=64,e.ids=[64],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},30626:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>k,patchFetch:()=>R,requestAsyncStorage:()=>g,routeModule:()=>p,serverHooks:()=>E,staticGenerationAsyncStorage:()=>m});var n={};r.r(n),r.d(n,{GET:()=>c,POST:()=>d});var o=r(49303),a=r(88716),s=r(60670),i=r(87070),u=r(71736);let l=[{id:"1",code:"TR",name:"T\xfcrkiye",nameEn:"Turkey",region:"Europe",subregion:"Southern Europe",population:847e5,area:783562,latitude:39.9334,longitude:32.8597},{id:"2",code:"US",name:"Amerika Birleşik Devletleri",nameEn:"United States",region:"Americas",subregion:"North America",population:3319e5,area:9833517,latitude:39.8283,longitude:-98.5795},{id:"3",code:"DE",name:"Almanya",nameEn:"Germany",region:"Europe",subregion:"Western Europe",population:832e5,area:357114,latitude:51.1657,longitude:10.4515},{id:"4",code:"FR",name:"Fransa",nameEn:"France",region:"Europe",subregion:"Western Europe",population:678e5,area:551695,latitude:46.2276,longitude:2.2137},{id:"5",code:"CN",name:"\xc7in",nameEn:"China",region:"Asia",subregion:"Eastern Asia",population:1439e6,area:9596961,latitude:35.8617,longitude:104.1954}];async function c(e){try{let{searchParams:t}=new URL(e.url),r=t.get("region"),n=t.get("search");try{let e=(await (0,u.N)()).collection("countries"),t={};r&&(t.region=RegExp(r,"i")),n&&(t.$or=[{name:RegExp(n,"i")},{nameEn:RegExp(n,"i")},{code:RegExp(n,"i")}]);let o=await e.find(t).toArray();return i.NextResponse.json({success:!0,data:o,total:o.length})}catch(t){console.error("Database error:",t);let e=l;if(r&&(e=e.filter(e=>e.region?.toLowerCase()===r.toLowerCase())),n){let t=n.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.nameEn?.toLowerCase().includes(t)||e.code.toLowerCase().includes(t))}return i.NextResponse.json({success:!0,data:e,total:e.length,fallback:!0})}}catch(e){return i.NextResponse.json({success:!1,error:"\xdclkeler getirilemedi"},{status:500})}}async function d(e){try{let t=await e.json();if(!t.code||!t.name)return i.NextResponse.json({success:!1,error:"\xdclke kodu ve adı gerekli"},{status:400});try{let e=(await (0,u.N)()).collection("countries");if(await e.findOne({code:t.code}))return i.NextResponse.json({success:!1,error:"Bu \xfclke kodu zaten mevcut"},{status:409});let r={code:t.code,name:t.name,nameEn:t.nameEn||t.name,region:t.region||"",subregion:t.subregion||"",population:t.population||0,area:t.area||0,latitude:t.latitude||0,longitude:t.longitude||0,createdAt:new Date,updatedAt:new Date},n=await e.insertOne(r),o={...r,_id:n.insertedId.toString()};return i.NextResponse.json({success:!0,data:o,message:"\xdclke başarıyla eklendi"},{status:201})}catch(e){return console.error("Database error:",e),i.NextResponse.json({success:!1,error:"Veritabanı hatası"},{status:500})}}catch(e){return i.NextResponse.json({success:!1,error:"\xdclke eklenemedi"},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/countries/route",pathname:"/api/countries",filename:"route",bundlePath:"app/api/countries/route"},resolvedPagePath:"C:\\Users\\Emre\\Desktop\\WEB SİTELERİ\\polikriz1.1\\src\\app\\api\\countries\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:g,staticGenerationAsyncStorage:m,serverHooks:E}=p,k="/api/countries/route";function R(){return(0,s.patchFetch)({serverHooks:E,staticGenerationAsyncStorage:m})}},71736:(e,t,r)=>{let n;r.d(t,{N:()=>s});let o=require("mongodb");process.env.MONGODB_URI||console.warn("MONGODB_URI not found, using fallback mode");let a=process.env.MONGODB_URI;async function s(){let e=await n;if(!e)throw Error("MongoDB not configured - using fallback mode");return e.db("polikriz_platform")}n=a?new o.MongoClient(a,{}).connect():Promise.resolve(null)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[276,972],()=>r(30626));module.exports=n})();